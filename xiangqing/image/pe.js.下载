/* SVN.committedRevision=f279392 */
var _scrollIndex=0;(function(a){a.fn.extend({scrollPlugin:function(b){var c={prevClassName:".prev",nextClassName:".next",disableStyle:{opacity:".2",cursor:"default"},slideClassName:".slideUl",itemClassName:".item",distance:"screen",viewDot:"false",dotClassName:[".cur_num",".total_num"],showItem:6,speed:200,callBack:function(){}};var b=a.extend(true,c,b);this.each(function(){var i=a(this),e=a(b.prevClassName,i),h=a(b.nextClassName,i),n=a(b.slideClassName,i),k=a(b.itemClassName,i),m=k.length,j=k.outerWidth(true),l,o,d=a(b.dotClassName[0],i),g=a(b.dotClassName[1],i);switch(b.distance){case"single":l=j;o=m-b.showItem;break;case"screen":l=j*b.showItem;o=Math.ceil(m/b.showItem)-1;break}if(o<=0){e.hide();h.hide();d.hide();g.hide();return false}if(b.viewDot==true){g.text("/"+(o+1))}var f={init:function(){n.css({width:j*m});
e.css(b.disableStyle).unbind("click").bind("click",f.rightScroll);h.unbind("click").bind("click",f.leftScroll)},leftScroll:function(){if(!n.is(":animated")){_scrollIndex+=1;_scrollIndex==o+1?_scrollIndex=o:"";if(_scrollIndex==o){f.toLastPage()}else{f.showPlay("-",l)}e[0].removeAttribute("style");f.dotNext();b.callBack()}},rightScroll:function(){if(!n.is(":animated")){_scrollIndex-=1;_scrollIndex==-1?_scrollIndex=0:"";if(_scrollIndex==0){f.toFirstPage()}else{f.showPlay("+",l)}h[0].removeAttribute("style");f.dotPrev();b.callBack()}},showPlay:function(p,q){n.stop(true,true).animate({marginLeft:""+p+"="+q},b.speed)},toLastPage:function(){h.css(b.disableStyle);e[0].removeAttribute("style");n.stop(true,true).animate({marginLeft:-(m-b.showItem)*j},b.speed)},toFirstPage:function(){e.css(b.disableStyle);
h[0].removeAttribute("style");n.stop(true,true).animate({marginLeft:0},b.speed)},dotNext:function(){var p=parseInt(d.text());if(p==o+1){return false}d.text(p+1)},dotPrev:function(){var p=parseInt(d.text());if(p==1){return false}d.text(p-1)}};f.init()});return this}})})(jQuery);var peUrlPrefix=URLPrefix.pe_yhd||"//e.yhd.com";var totalPageSize=10;var jsCommentFed={productShow:function(){var g=$(".pro_show .thumb_box li");var d=$(".jsPublishComment");g.bind({mouseover:function(){$(this).find("i").css({top:0})},mouseout:function(){$(this).find("i").css({top:40})},click:function(){var l=$(this);var i=l.index();var k=l.parents(".pro_show");k.attr("currentIndex",i);var j=k.find(".pic_box .pic");a(j.find("ul"),l,i);k.find(".pic_box").fadeIn();var h="";k.find(".thumb_box img").each(function(n,o){var m=$(o).attr("src");var p=m.replace(/s\d+x\d+_/,"s400x400_");if(i==n){if($(o).is(":visible")==false){k.find(".pic_box").hide();return false}h+='<img src="'+p+'" alt="" style="display:block" />';$(o).closest("li").attr("class","cur").siblings().removeClass("cur")}else{h+='<img src="'+p+'" alt="" style="display:none" />'
}});k.find(".pic_box").find(".imgBox").html("");k.find(".pic_box").find(".imgBox").append(h)}});function a(j,i,h){j.stop().animate({left:-430*h});i.addClass("cur").siblings().removeClass("cur")}d.on("click",".hide",function(){$(this).parents(".pic_box").hide()});var b=0;function f(h,i){h.on("click",i,function(){var j=$(this);b++;if(b<4){c(j,b)}else{if(b>3){b=0;c(j,b)}}})}function e(h,i){h.on("click",i,function(){var j=$(this);b--;if(b>-4){c(j,b)}else{if(b<-3){b=0;c(j,b)}}})}f(d,".t-right");e(d,".t-left");function c(h,i){h.parents(".pic_box").find(".imgBox img").css("transform","rotate("+i*90+"deg)")}d.on({mousemove:function(j){var i=j||window.Event,h=i.pageX-$(this).offset().left,k=i.pageY-$(this).offset().top;if(h>1&&h<130){$(this).parents(".pic_box").addClass("leftCursor").removeClass("zoomOut rightCursor")
}else{if(h>130&&h<260){$(this).parents(".pic_box").addClass("zoomOut").removeClass("leftCursor rightCursor")}else{if(h>260&&h<390){$(this).parents(".pic_box").addClass("rightCursor").removeClass("zoomOut leftCursor")}}}},click:function(m){var j=m||window.Event,h=j.pageX-$(this).offset().left,o=j.pageY-$(this).offset().top,l=$(this);var k=l.parents(".pro_show");var i=parseInt(k.attr("currentIndex"));if(h>1&&h<130){i=(i-1)<=0?0:(i-1);l.parents(".pic").find(".imgBox img").eq(i).show().siblings().hide();l.parents(".pro_show").find(".thumb_box li").eq(i).attr("class","cur").siblings().removeClass("cur")}else{if(h>130&&h<260){l.parents(".pic_box").hide()}else{if(h>260&&h<390){var n=l.parents(".pic").find(".imgBox img");i=(i+1)>=n.length?n.length-1:(i+1);n.eq(i).show().siblings().hide();l.parents(".pro_show").find(".thumb_box li").eq(i).attr("class","cur").siblings().removeClass("cur")
}}}k.attr("currentIndex",i)}},".pic_box .imgBox")},commentLength:function(){$(".main .item .comment_content_text").each(function(a,b){if($(b).height()>175){$(b).css("height",175);$(b).siblings(".open_all").show()}});$(".main .item .open_all").click(function(){if(!$(this).find("i").hasClass("back")){$(this).find("a").html("收起内容");$(this).find("i").addClass("back");var a=$(this).parent().find(".comment_content_text").css("height","auto").height();$(this).parent().find(".comment_content_text").css("height",80);$(this).parent().find(".comment_content_text").animate({height:a})}else{$(this).find("a").html("展开内容");$(this).find("i").removeClass("back");$(this).parent().find(".comment_content_text").animate({height:80})}})},switchTabType:function(){$(".comment_type li").click(function(){$(this).addClass("cur").siblings().removeClass("cur")
})},showTabPoint:function(){$(".bottom_con .li_con").mouseenter(function(){$(this).find(".tab_point").show()});$(".bottom_con .li_con").mouseleave(function(){$(this).find(".tab_point").hide()})},changeSort:function(){$("#pe_sort").change(function(){loadProductExperience_pe(1)})},changeSkuComment:function(){$("#currentComment").click(function(){loadProductExperience_pe(1)})},ie6:function(){var a=navigator.userAgent.toLowerCase();if(a.indexOf("msie")<0){return false}var b=a.split("msie");return parseInt(b[1].split(";")[0])<=6},main:function(){this.productShow();this.commentLength();this.switchTabType();this.showTabPoint();this.changeSort();this.changeSkuComment()}};function changeCommentFlag(a){$("#commentFlag").val(a)}function loadProductExperience_pe(currPage,preCurrPage,confirmBtnEle,pageSize){$("#div_pe_clist").show();
var regTextInteger=/^[0-9]*$/;var pageCountPage=$("#pageCountPage").val();if(regTextInteger.test(currPage)){if(currPage==0){yhdLib.alert("输入页码不能为0或其他非数字字符,请重新输入");return false}if(eval(currPage)>eval(pageCountPage)){yhdLib.alert("输入页码不能大于最大页码数,请重新输入");return false}}else{yhdLib.alert("输入页码不能为0或其他非数字字符,请重新输入");return false}if(pageSize){totalPageSize=pageSize}else{pageSize=totalPageSize}preCurrPage=preCurrPage?preCurrPage:0;var currPage=figureProductExperiencePageNo(currPage,confirmBtnEle);var commentProductId=parseInt($("#commentProductId").val());if(!commentProductId){return}var sort=$("#pe_sort").val();if(!sort||sort=="undefined"){sort=5}var skuHandler=$("#currentComment").prop("checked");var method=skuHandler?"getSkuCommentDetail.do":"getCommentDetail.do";var url=peUrlPrefix+"/squ/comment/"+method;
url+="?productId="+commentProductId+"&pagenationVO.currentPage="+currPage+"&pagenationVO.preCurrentPage="+preCurrPage+"&pagenationVO.rownumperpage="+pageSize+"&filter.commentFlag="+$("#commentFlag").val()+"&filter.sortType="+sort;$.ajax({type:"get",url:url,dataType:"jsonp",cache:true,jsonp:"callback",jsonpCallback:"comment_handler_success",success:function(data){document.getElementById("productExperience").innerHTML=data.value;$('#pe_sort option[value="'+sort+'"]').attr("selected",true);if(skuHandler){$("#currentComment").prop("checked",true)}jsCommentFed.main();window.location.href="#productExperience"},error:function(e){}})}$(function(){jsCommentFed.main()});function figureProductExperiencePageNo(b,a){var d=1;if(b&&b>0){d=b}else{var c=$(a).prev("#jumpto").first();if(c){d=c.val()}}return d
};